local npc = Npc(297, 9005)
--TODO: Lié à la quête d'Alignement 64 Bonta & Brâkm:ar
npc.accessories = {0, 0, 0, 7519, 0}

npc.sales = {
    {item = 8319},
    {item = 8316},
    {item = 8318},
    {item = 8317},
    {item = 2092},
    {item = 7529},
    {item = 7530},
    {item = 7528},
    {item = 7531},
    {item = 2091},
    {item = 2093},
    {item = 2239}
}

npc.barters = {
    {to = {1711, 1}, from = {
        {itemID = 7536, quantity = 1},
        {itemID = 2239, quantity = 1},
    }},
    {to = {1728, 1}, from = {
        {itemID = 7537, quantity = 1},
        {itemID = 2239, quantity = 1},
    }},
    {to = {1748, 1}, from = {
        {itemID = 7538, quantity = 1},
        {itemID = 2239, quantity = 1},
    }},
    {to = {2074, 1}, from = {
        {itemID = 7536, quantity = 1},
        {itemID = 2239, quantity = 1},
    }},
    {to = {7539, 1},
     from = {
         {itemID = 2074, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7540, 1},
     from = {
         {itemID = 2075, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7541, 1},
     from = {
         {itemID = 2076, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7542, 1},
     from = {
         {itemID = 2077, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7543, 1},
     from = {
         {itemID = 6604, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7544, 1},
     from = {
         {itemID = 6716, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7536, 1},
     from = {
         {itemID = 6717, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7545, 1},
     from = {
         {itemID = 6978, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7546, 1},
     from = {
         {itemID = 7414, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7547, 1},
     from = {
         {itemID = 7415, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7548, 1},
     from = {
         {itemID = 7518, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7549, 1},
     from = {
         {itemID = 7519, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7550, 1},
     from = {
         {itemID = 7520, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7551, 1},
     from = {
         {itemID = 7522, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8885, 1},
     from = {
         {itemID = 7524, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7721, 1},
     from = {
         {itemID = 7703, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7722, 1},
     from = {
         {itemID = 7704, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7723, 1},
     from = {
         {itemID = 7705, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7724, 1},
     from = {
         {itemID = 7706, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7725, 1},
     from = {
         {itemID = 7707, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7726, 1},
     from = {
         {itemID = 7708, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7727, 1},
     from = {
         {itemID = 7709, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7728, 1},
     from = {
         {itemID = 7710, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7729, 1},
     from = {
         {itemID = 7711, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7730, 1},
     from = {
         {itemID = 7712, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7731, 1},
     from = {
         {itemID = 7713, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8020, 1},
     from = {
         {itemID = 7714, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7893, 1},
     from = {
         {itemID = 7891, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {7894, 1},
     from = {
         {itemID = 7892, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8016, 1},
     from = {
         {itemID = 7911, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8017, 1},
     from = {
         {itemID = 8000, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8172, 1},
     from = {
         {itemID = 8151, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8171, 1},
     from = {
         {itemID = 8153, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8173, 1},
     from = {
         {itemID = 8154, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8174, 1},
     from = {
         {itemID = 8155, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8524, 1},
     from = {
         {itemID = 8211, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8565, 1},
     from = {
         {itemID = 8561, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8679, 1},
     from = {
         {itemID = 8677, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {8706, 1},
     from = {
         {itemID = 8693, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {9595, 1},
     from = {
         {itemID = 9594, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {9661, 1},
     from = {
         {itemID = 9617, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {9664, 1},
     from = {
         {itemID = 9619, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {9665, 1},
     from = {
         {itemID = 9620, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {9671, 1},
     from = {
         {itemID = 9623, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {9666, 1},
     from = {
         {itemID = 9624, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {9786, 1},
     from = {
         {itemID = 9785, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {10108, 1},
     from = {
         {itemID = 10106, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {10109, 1},
     from = {
         {itemID = 10107, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
    {to = {10807, 1},
     from = {
         {itemID = 10802, quantity = 1},
         {itemID = 2239, quantity = 1},
     }},
}

local price = 1000
---@param p Player
---@param answer number
function npc:onTalk(p, answer)
    if answer == 0 then p:ask(1150, {819, 818, 1239})
    elseif answer == 818 then p:ask(1151, {820, 3576})
    elseif answer == 820 then p:ask(1154, {822})
    elseif answer == 822 then p:ask(1156)
    elseif answer == 3576 then p:ask(4102)
    elseif answer == 819 then p:ask(1152)
    elseif answer == 1239 then
        local responses = p:kamas() >= price and {1240} or {}
        p:ask(1606, responses)
    elseif answer == 1240 then
        if p:modKamas(-price) then
            p:addItem(2239)
            p:ask(1607)
        end
    end
end

RegisterNPCDef(npc)
