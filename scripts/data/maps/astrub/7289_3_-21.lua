local map = MapDef(
        7289,
        "0905131019",
        "213f654d5b59435945507c7c2f21374f794d62314b2825324226726d704472475d5c792d253235682532355850646f37417a693a7066753135755e346b2c5a334a617d76606531743d4c6923413e74304d46673f47212f396d6d6a267b4b5678297a5d5f3b577a346a7829782025324227765f7c3d4e713a5d455a3d6c37345a2c6d5f353f2d626f31445054662d482c75375b3f5f4a6b6b",
        "HhaaeaaaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhd0eaaaaaHhd0eaaaaaHhaaeaaaaaHhd0eaaaaaHhaaeaaaC5HhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaaeaaaaaHhGaeaaaaaGhaaeaaadUHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhJ0eaaaaaHht0eqgaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaaeaaaeAGhaaeaaadUHhGaeaaaaaHhGaeaaaaaHhJ0eaaaaaHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaC5HhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaaeaaaaaGhaaeaaadUHhGaeaaaaaHhJ0eaaaaaHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaeBHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhaaeaaaeBHhaaeaaaaaGhaaeaaaaaHhGaeaaaaaHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhJZeaaaaaHhGaeaaaaaHhGaeaaaaaGhaaeaaaaaHhaaeaaaeBHhaaeaaaaaHhaaeaaaeAGhaaeaaaeFHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaCJHhaaeaaaaaGhaaeaaaaaHhGaeaaaeFHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaaeaaaaaHhaaeaaadPHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaeAHhGaeaaaaaHhGaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaaaGhaaeaaaaaHhiaeaadPGHhGaeiFaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhcJeaaadyHhGaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaaaGhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaeAGhaaeaaadUGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhGaeaaaeBHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhJ0eaaaaaHhaaeaaadRGhaaeaaaaaGhaaeaaaCKGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaadyGhaaeaaaaaGhdYeaaaaaGhaaeaaaaaGhaaeaaaaaHhl1eaadPFHhGaeiFaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaadRGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhd1eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeiFaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeiFaaaHhGaeaaaaaHhaaeaaadOGhaaeaaaaaGhaaeaaaCMGhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhIJeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeCFaaaHhGaeaaaaaHhGaeaaaaaHhGaecFaaaHhd0eaaadyHhqaeaaaoiGhaaeaaaaaGhaaeaaaaaHhd1eaaaeAHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaCSHhaaeaaaaaGhaaeaaaaaHhJYeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaadyHhGaeaaadmGhaaeaaaaaHhl1eaadPEHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhJ1eaaaaaHhaaeaaaCYGhdYeaaaaaGhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhIJeaaaaaHhJ0eaaaaaHhIJeiFaaaGhiaeaad1pHhJ1eaaaeBHhaaeaaaaaHhGaeaaaaaHhGaeiFaaaHhGaeaaaaaHhaaeaaaCSGhaaeCEaaaGhaaeaaaCOGhaaeaaaaaHhGaeCDaaaHhaaeaaaCSHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaCSHhaaeaaaCSGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhd1eaaaCVHhd1eaaaCSHhGaecFaaaHhGaeaaaaaHhGaeaaaaaHhJ1eaaaaaHhaaeaaaaaHhJ0eaaaaaHhd1eaaaaaHhd1eiFaCRHhaaeaaaaaGhaaeaaaDUGhaaeaaaaaGhaaeaaaaaHhGaeaaaaaHhd1eaaaaaHhcJeaaaCSHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhd1eaaaaaHhqaeqgaaaHhaaeaaaCSHhaaeaaaCUHhaaeaaaCWHhGaeaaaaaHhGaeaaaaaGhaaeCGaaaHhGaeaaaaaHhaaeaaaCTHhdYeaaaCQHhJ1ecFaaaHhIJeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhGaeaaaaaHhJ1ecFaaaHhGaecFaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaCSHhGaecFaaaHhGaeaaaaaHhGaem0am0HhaaeaaaCQHhGaem0aaaHhGaeaaaaaHhGaeaaaeAHhaaeaaaaaHhJ0eaaaaaHhJ1eaaaaaHhGaeaaaaaHhGaeCzaaaHhGaeaaaaaHhGaeaaaaaHhGaecFaaaHhd1ecFaaaHhGaeaaaaaHhGaeCAam0HhGaeaaaaaHhIJeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhJYeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaCUHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhJ0eaaaaaHhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeCzaaaHhGaeaaaaaHhGaeaaaeAHhJ0eaaaaaHhJ0eaaaaaHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeCAaaaHhGaeaaaaaHhGaeaaaaaHhqaeaaaaaHhd0eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhIJeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhIJeaaaaaHhGaeiFaaaHhcKeaaaaaHhGaeaaaaaHhGaeCzaaaHhGaeaaaaaHhGaeaaaaaHhGaecFaaaHhGaeaaaaaHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeCAaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaecFaaaHhJ0eaaaaaHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhGaeCzaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhJYeCAaaaHhqaeaaaqgHhaaeCBaaaHhGaeaaaaaHhJYeaaaeBHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhqaeqgaaaHhGaeaaaaaHhGaeaaaeBHhJ0eaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeCAaaaHhd0eaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhcJeaaaaaHhaaeaaaaaHhaaeaaaaaHhdYeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhd0eaaaaa",
        15,
        17,
        3,
        -21,
        95
)

map.positions = "cgcucvcIcJcWcXc_|fkfyfzfMfNf0f1gd"
map.capabilities = 34
map.npcs = {
    [504] = {400, 1},
    [554] = {295, 3}
}

map.allowedMobGrades = {
    {98, 1},
    {98, 2},
    {98, 3},
    {98, 4},
    {98, 5},
    {52, 1},
    {52, 2},
    {52, 3},
    {52, 4},
    {52, 5},
    {101, 1},
    {101, 2},
    {101, 3},
    {101, 4},
    {101, 5},
    {134, 1},
    {134, 2},
    {134, 3},
    {134, 4},
    {134, 5},
    {149, 1},
    {149, 2},
    {149, 3},
    {149, 4},
    {149, 5}
}

local function tryEntering(_, _, p)
    if p:breed() == 4 then
        p:teleport(7580, 351)
    else
        --TODO: send error (in chat)
    end
end

map.onMovementEnd = {
    [23] = moveEndTeleport(7392, 443),
    [434] = moveEndTeleport(7409, 349),
    [455] = moveEndTeleport(7394, 21),
    [305] = moveEndTeleport(7377, 390),
    [229] = tryEntering
}

RegisterMapDef(map)
