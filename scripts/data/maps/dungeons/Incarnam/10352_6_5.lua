local map = MapDef(
	10352,
	"0712171151",
	"27717b7d67432532357a41527b6d436c5f485e38597b2c47653e7f42714d427456215b68503a3c52335a72343d454c5d706358204f4d536e365172594c552a70432357304d4469266e32245b29693a4f7e5870794f63504a76286d53672025323534426771515d76234c2532422e3e4a556b394c6b366250422f675e2f6331686f453a302532423355482773515b40757470417e4c326f2c32497c5f22427049424e",
	"HhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaae8NaaaHhaaeaaaaaGhaae8NaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaoIHhaae8OaaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaae8NaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhGaeaaaaaHhaaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaae8OaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaoIHhGae7NiaaHhGaeaaaaaHhGaeaaaaaGhaaeaaaaaHhiaeaaaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaae8OaaaHhaaeaaa8QHhGaeaaabNHhGaeoIaaaHhGae7NaaaHhGaeaaaaaHhaaeaafMRGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaHhaaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaae7OiaaGhaaeoIaoIGhaaeoIabNHhqae7LiqgHhGae7LaaaHhGaeaaaaaHhGae7QaaaHhGaeaaaaaHhaaeaaaaaGhaae8JaaaGhaaeaaaaaHhaaeaaaaaGhaaeaaaaaGhaae8OaaaGhaaeaaaaaGhaaeaaaaaGhaae7LaaaHhGaeaaaaaHhGae7OeHcHhGaeaaaaaHhGae7OiaaHhGaeaaaaaHhGaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaae8JaaaGhaae8JaaaGhaaeaaaaaGhaaeaaaoIGhaaeaaaoIGhaaeaaaoIGhaaeaaaoIHhGaeoIaaaHhHKeaaaaaHhGaeaaaaaHhGae7LaaaHhGae7NiaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaoIGhaaeaaaoIGhaaeaaaoIGhaae7LioIGhaaeaaabNGhaaeaae7VHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhaae7Qa7VGhaaeaaaaaGhaaeaaaaaGhaaeaaaaaGhaaeaaaoIGhaaeaaaaaGhaae7LiAYGhaaeaaaaaGhaae7LiaaHhHKeaaabNHhGae7OiaaHhGaeaaaaaHhGae7LaaaHhGaeaaaaaHhaae7OaaaHhaae7QibNGhaaeaaaaaGhaaeaaaaaGhaae7OaaaGhaae7OaaaGhaaeIWaaaGhaaeaaaaaHhGae7QiaaHhGaeaaaaaHhGaeaaaaaHhGae7LiaaHhGaeJgaaaHhGaeaaaaaHhGae7QiaaHhaae7NaaaHhaaeaaaaaGhaaeaaaA6HhaaeaaaoIGhaaeaaao9GhaaeaaaoIGhaaeaaaaaGhaaeaaa7CHhGae7LiaaHhGaeaaaaaHhGaeJgaaaHhGaeaaaaaHhGae7QiaaHhGaeaaaaaHhGaeaaaaaGhaaeaae7qHhaae7Qa7eHhaaeaaaaaGhaaeaaaaaGhaaeaaaA5Ghaaeaaa6RGhaaeaaaaaHhaaeaaa6SHhGaeaaaaaHhGae7LaaaHhGae7LiaaHhGae7OiaaHhGaeaaaaaHhGae7LaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaA6HhaaeaaaaaGhaaeaaa7UHhaaeIWaaaHhGae7OiaaHhaaeaaa6UHhGaeaaaaaHhGaeaaaaaHhGae7OaaaHhGae7LaaaHhGaeaaaaaHhGae7QaaaHhGaeaaaaaHhGae7OiaaHhGaeaaaaaHhaae7OaaaGhaaeaaabNHhaaeaaaaaHhaaeaaaaaHhGaeaaaAYGhaae7Qa7IHhGaeaaaaaHhGaeaaaaaHhGae7LabNHhGae7QiaaHhGae7OiAXHhjKeaaaaaHhGaeaaaaaHhGae7NiaaHhaaeaaaAWHhaae7OaoIHhaaeaaaA5HhGaeaaaaaHhGaeaaaaaHhGaeaaaaaGhaae7Qi7GGhaaeaaa7IHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhHKeJgaaaHhGaeaaaaaHhGae7LiaaHhGae7QaaaHhGaeaaaaaHhaae7NaoIHhGaeaaaaaHhGaeaaaaaHhGae7OaaaHhHKeaaaaaHhaaeaaa6XGhaaeaaa7EGhaae7La7KGhaae7Li7mHhGaeSIaaaHhGae7QiaaHhGae7QiaaHhGae7NiaaHhGaeaaaaaHhaae7OaaaHhaae7NaaaGhaae7NaAZHhGaeaaaaaHhGaebNaaaHhHKeaaao-HhGae7OibNGhaae7QiA5Ghaaeaaa7nHhGaeaaaaaHhGae7OiaaHhGaeaaaaaHhGae7NaaaHhGaeaaaaaHhaae7OaaaHhaae7NaoIHhaaeaaaaaHhGaeaaaaaHhGae7OaaaHhHKe7OaaaHhGae7OiaaGhaaeaaa7oHhGaeaaaA6HhGae7OaaaHhGaeaaas5HhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeIWaaaHhaaeaaaoIHhaaeaaaaaHhGae7OaaaHhGaeJgaaaHhGaeaaaaaHhGae7LaaaHhGae7OaaaHhGae7QiaaHhGaeaaaaaHhGae7NiaaHhHKeaaaaaHhGaeaaaaaHhGae7QiaaHhaaeaaaaaHhaaeIWaoIHhaae7NaaaHhaaeaae7rHhHKeaaaaaHhGae7OaaaHhGaeaaaaaHhGaeJgaaaHhGaeaaaaaHhGae7Qas5HhGaeaaaaaHhGae7NaaaHhGae7LiaaHhGaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaoIGhaaeaaaaaHhGaeaaaaaHhHKeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGae7OaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaae7NaoIGhaaeaaaA1Hhaae7OiaaHhHKeaaaaaHhGaeaaaaaHhGae7OaaaHhGaeaaaaaHhGaeaaas5HhGaeaaaaaHhGae7NaaaHhHKeaaaaaHhGaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaaaGhaae7LiaaHhaaeaaaaaHhGaeaaaaaHhaae7Li7pHhGaeaaaaaHhGaeaaaaaHhGae7OaaaHhGae7NaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaaaHhaaeaaaoIGhaaeaaaaaHhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGae7LiaaHhGaeaaaaaHhGaeaaaaaHhGaeaaaaaHhGae7QiaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhGaeaaaaaHhGaeaaaaaHhaaeaaaaaHhaaeaaaaaHhGaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaaaHhaaeIWaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaaaHhaaeIWaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaaaHhaaeIWaaaHhaaeIWaaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaaaHhaaeIWaaaHhaaeIWaaaHhaaeIWaaaHhaaeIWaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaGhaaeaaaAVHhaaeaaaaaHhaaeIWaaaHhaaeIWaaaHhaaeIWaaaHhaaeIWaaaHhaaeIWaaaHhaaeIWaaaHhaaeIWaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeIWaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaaHhaaeaaaaa",
	15,
	17,
	6,
	5,
	447
)

map.positions = "cyczcAc1c2c3dsdtdudY|eZe0e1e2frfsftfVfWgn"
map.capabilities = 111
map.mobGroupsCount = 3
map.mobGroupsMaxSize = 5
map.npcs = {
	[886] = {255, 1},
}
-- '0;0;0;0;0;0;0' forbiddens -> capabilities ? Or script ?


map.onMovementEnd = {
	[84] = moveEndTeleport(10359, 277),
	[108] = moveEndTeleport(10335, 226),
}

-- Support opening door
local doorCellID = 98
local slabCells = {299, 327, 355}
local requiredPlayers = 1

local openDoorFn = openAndCloseAfterMillis(10352, doorCellID, 30000)

---@param md MapDef
---@param m Map
local checkOpenDoor = function(md, m, p)
	local count = 0

	for _, cID in ipairs(slabCells) do
		if #(m:cellPlayers(cID)) > 0 then
			count = count + 1
		end
	end

	if count >= requiredPlayers then
		openDoorFn(md, m, p)
	end
end

for _, cID in ipairs(slabCells) do
	map.onMovementEnd[cID] = checkOpenDoor
end

map.animations = {
	[doorCellID] = AnimatedObjects.SlidingRockIncarnam,
}
